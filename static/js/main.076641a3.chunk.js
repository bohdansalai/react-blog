(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{112:function(e,t,n){},116:function(e,t,n){},118:function(e,t,n){},120:function(e,t,n){},122:function(e,t,n){},124:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(65),r=n.n(c),l=n(13),i=n(4),s=(n(88),n(89),n(7)),u=(n(52),n(12)),m=n(24),d=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)(""),s=Object(i.a)(l,2),d=s[0],E=s[1],g=e.handleAddFormHide;return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:"addPostForm",onSubmit:function(t){t.preventDefault();var n={title:c,description:d,liked:!1};e.addNewBlogPost(n),e.handleAddFormHide()}},o.a.createElement("button",{className:"hideBtn",type:"button",onClick:g},o.a.createElement(m.a,{icon:u.c,size:"xl"})),o.a.createElement("h2",null,"Creating post"),o.a.createElement("div",null,o.a.createElement("input",{className:"addFormInput",type:"text",name:"postTitle",placeholder:"Title",value:c,onChange:function(e){r(e.target.value)},required:!0})),o.a.createElement("div",null,o.a.createElement("textarea",{className:"addFormInput",name:"postDescription",placeholder:"Information ",value:d,onChange:function(e){E(e.target.value)},required:!0,rows:"8"})),o.a.createElement("div",{className:"addPostControl"},o.a.createElement("button",{type:"submit",className:"commonBtn"},"Add post"))),o.a.createElement("div",{className:"overlay",onClick:e.handleAddFormHide}))},E=n(21),g=n.n(E),f=n(1),p="https://625001d7e3e5d24b3419fcee.mockapi.io/posts/",b=function(){var e=Object(l.useQueryClient)();return Object(l.useMutation)(function(e){return g.a.put(p+e.id,e).then(function(e){return e.data}).catch(function(e){throw new Error(e)})},{onSuccess:function(t){e.invalidateQueries("posts"),e.setQueryData(["post",t.id],t)},onError:function(e){console.log(e)}})},v=function(){var e=Object(l.useQueryClient)(),t=Object(f.g)(),n=Object(f.f)();return Object(l.useMutation)(function(e){return g.a.delete(p+e.id).then(function(e){return e.data}).catch(function(e){throw new Error(e)})},{onSuccess:function(){e.invalidateQueries("posts"),"/blog"!==n&&t("/blog")},onError:function(e){console.log(e)}})},h=function(){var e=Object(l.useQueryClient)();return Object(l.useMutation)(function(e){return g.a.put(p+e.id,e).then(function(e){return e.data}).catch(function(e){throw new Error(e)})},{onSuccess:function(t){e.invalidateQueries("posts"),e.setQueryData(["post",t.id],t)},onError:function(e){console.log(e)}})},N=function(){var e=Object(l.useQueryClient)();return Object(l.useMutation)(function(e){return g.a.post(p,e).then(function(e){return e.data}).catch(function(e){throw new Error(e)})},{onSuccess:function(){e.invalidateQueries("posts")},onError:function(e){console.log(e)}})},O=(n(112),function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=e.userName,r=e.isAdmin,l=e.setIsAdmin,u=Object(a.useState)(!1),m=Object(i.a)(u,2),E=m[0],g=m[1],f=N();return o.a.createElement("header",null,o.a.createElement("div",{className:"headerInner"},o.a.createElement("div",null,o.a.createElement(s.b,{className:"commonBtn",to:"/"},"MY BLOG IN REACT")),t?o.a.createElement("div",null,"Logged in as\xa0 ",o.a.createElement("span",null,c),"\xa0\xa0",r&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"commonBtn",onClick:function(){g(!0),console.log("ddd")}},"Create new post")),o.a.createElement(o.a.Fragment,null,o.a.createElement(s.c,{onClick:function(){localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userName"),n(!1),l(!1)},to:"/login"},o.a.createElement("button",{className:"commonBtn"},"Log out")))):null),E&&o.a.createElement(d,{addNewBlogPost:function(e){f.mutate(e)},handleAddFormHide:function(){g(!1)}}))}),j=n(36),w=(n(40),n(62),function(e){var t=e.id,n=e.title,a=e.description,c=e.liked,r=e.likePost,l=e.deletePost,i=e.handleEditFormShow,d=e.handleSelectPost,E=e.isAdmin,g=c?"crimson":"black";return o.a.createElement("div",{className:"post"},o.a.createElement("div",{className:"postContent"},o.a.createElement("div",{className:"postHeaderDiv"},o.a.createElement("div",null,n),o.a.createElement("div",null,o.a.createElement("button",{onClick:r},o.a.createElement(m.a,{icon:u.a,size:"xl",style:{color:g}})))),o.a.createElement("div",{className:"postDesc"},a),o.a.createElement("div",{className:"postControl"},E&&o.a.createElement("div",null,o.a.createElement("button",{className:"commonBtn",onClick:function(){d(),i()}},"Edit"),o.a.createElement("button",{className:"commonBtn",onClick:l},"Delete")),o.a.createElement(s.b,{className:"commonBtn",to:"/blog/".concat(t)},"Open"))))}),I=(n(116),function(e){var t=Object(a.useState)(e.selectedPost.title),n=Object(i.a)(t,2),c=n[0],r=n[1],l=Object(a.useState)(e.selectedPost.description),s=Object(i.a)(l,2),d=s[0],E=s[1],g=function(t){"Escape"===t.key&&e.handleEditFormHide()};return Object(a.useEffect)(function(){return window.addEventListener("keyup",g),function(){return window.removeEventListener("keyup",g)}},[e]),o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:"editPostForm",onSubmit:function(t){t.preventDefault();var n={id:e.selectedPost.id,title:c,description:d,liked:e.selectedPost.liked};e.editBlogPost(n),e.handleEditFormHide()}},o.a.createElement("button",{className:"hideBtn",type:"button",onClick:e.handleEditFormHide},o.a.createElement(m.a,{icon:u.c,size:"xl"})),o.a.createElement("h2",null,"Editing post"),o.a.createElement("div",null,o.a.createElement("input",{className:"editFormInput",type:"text",name:"postTitle",placeholder:"Title",value:c,onChange:function(e){r(e.target.value)},required:!0})),o.a.createElement("div",null,o.a.createElement("textarea",{className:"addFormInput",name:"postDescription",placeholder:"Information",value:d,onChange:function(e){E(e.target.value)},required:!0,rows:"8"})),o.a.createElement("div",{className:"addPostControl"},o.a.createElement("button",{type:"submit",className:"commonBtn"},"Save post"))),o.a.createElement("div",{className:"overlay",onClick:e.handleEditFormHide}))}),k=function(e){var t=e.isAdmin,n=Object(a.useState)(!1),c=Object(i.a)(n,2),r=c[0],s=c[1],E=Object(a.useState)(!1),f=Object(i.a)(E,2),O=f[0],k=f[1],y=Object(a.useState)({}),C=Object(i.a)(y,2),S=C[0],F=C[1],P=Object(l.useQuery)("posts",function(){return g.a.get(p).then(function(e){return e.data}).catch(function(e){throw new Error(e)})}),B=P.data,L=P.isLoading,A=P.isError,x=P.error,D=P.isFetching,H=b(),Q=v(),z=h(),T=N();if(L)return o.a.createElement(m.a,{icon:u.b,className:"icon-spin preloader",size:"xl"});if(A)return o.a.createElement("h1",null,x.message);var q=function(){k(!0)},M=B.map(function(e,n){return o.a.createElement(o.a.Fragment,{key:e.id},o.a.createElement(w,{key:e.id,id:e.id,title:e.title,description:e.description.length>200?e.description.slice(0,200)+"...":e.description,liked:e.liked,likePost:function(){return function(e){var t=Object(j.a)({},e);t.liked=!t.liked,H.mutate(t)}(e)},deletePost:function(){return t=e,void(window.confirm("Do you want to delete ".concat(t.title,"?"))&&Q.mutate(t));var t},handleEditFormShow:q,handleSelectPost:function(){F(e)},isAdmin:t}))}),G=D?.5:1;return o.a.createElement("div",{className:"blogPage"},r&&o.a.createElement(d,{addNewBlogPost:function(e){T.mutate(e)},handleAddFormHide:function(){s(!1)}}),O&&o.a.createElement(I,{handleEditFormHide:function(){k(!1)},selectedPost:S,editBlogPost:function(e){z.mutate(e)}}),o.a.createElement(o.a.Fragment,null,D&&o.a.createElement(m.a,{icon:u.b,className:"icon-spin preloader",size:"xl"}),o.a.createElement("div",{className:"posts",style:{opacity:G}},M)))},y=(n(118),function(){return o.a.createElement("footer",null,o.a.createElement("span",null,"Example of simple blog on react.js"))}),C=(n(120),function(e){var t=e.setIsLoggedIn,n=e.setUserName,c=e.setIsAdmin,r=Object(f.g)(),l=Object(a.useState)(""),s=Object(i.a)(l,2),u=s[0],m=s[1],d=Object(a.useState)(""),E=Object(i.a)(d,2),g=E[0],p=E[1];return o.a.createElement("form",{className:"loginForm",onSubmit:function(e){if(e.preventDefault(),"admin"===u){if("admin"!==g)return alert("Passwors is incorrect"),!1;c(!0)}localStorage.setItem("isLoggedIn",!0),localStorage.setItem("userName",u),n(u),t(!0),r("/")}},o.a.createElement("h2",null,"Authorization"),o.a.createElement("p",null,"admin - login: admin; password: admin. normal user - whatever "),o.a.createElement("div",null,o.a.createElement("input",{className:"loginFormInput",type:"text",placeholder:"login",required:!0,onChange:function(e){m(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("input",{className:"loginFormInput",type:"password",placeholder:"password",required:!0,onChange:function(e){p(e.target.value)}})),o.a.createElement("div",{className:"addPostControl"},o.a.createElement("button",{type:"submit",className:"commonBtn"},"Log in")))}),S=n(132),F=(n(122),function(){var e=Object(f.f)();return console.log(e),o.a.createElement(S.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:o.a.createElement(s.c,{to:"/",className:"commonBtn"},"Back Home")})}),P=function(e){var t=e.isLoggedIn,n=e.children;return t?o.a.createElement(f.a,{to:"/"}):n},B=function(e){var t=e.isLoggedIn,n=e.children;return t?n:o.a.createElement(f.a,{to:"/login"})},L=(n(124),function(e){var t=e.isAdmin,n=Object(f.h)().postId,c=Object(a.useState)({}),r=Object(i.a)(c,2),d=r[0],E=r[1],N=Object(a.useState)(!1),O=Object(i.a)(N,2),w=O[0],k=O[1],y=(Object(f.g)(),function(e){return Object(l.useQuery)(["post",e],function(){return g.a.get(p+e).then(function(e){return e.data}).catch(function(e){throw new Error(e)})})}(n)),C=y.data,S=(y.isLoading,y.isError),F=y.error,P=y.isFetching,B=b(),L=v(),A=h();if(P)return o.a.createElement(m.a,{icon:u.b,className:"icon-spin preloader",size:"xl"});if(S)return o.a.createElement("h1",null,F.message);var x=P?.5:1,D=C.liked?"crimson":"black";return o.a.createElement("div",{className:"posts"},o.a.createElement("div",{className:"onePost",style:{opacity:x}},w&&o.a.createElement(I,{handleEditFormHide:function(){k(!1)},selectedPost:d,editBlogPost:function(e){A.mutate(e)}}),o.a.createElement("div",{className:"postContent"},o.a.createElement("div",{className:"postHeaderDiv"},o.a.createElement("div",null,C.title),o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return function(e){var t=Object(j.a)({},e);t.liked=!t.liked,B.mutate(t)}(C)}},o.a.createElement(m.a,{icon:u.a,size:"xl",style:{color:D}})))),o.a.createElement("span",null,C.description)),o.a.createElement("div",{className:"postControl"},t&&o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"commonBtn",onClick:function(){return e=C,k(!0),void E(e);var e}},"Edit"),o.a.createElement("button",{className:"commonBtn",onClick:function(){return e=C,void(window.confirm("Do you want to delete ".concat(e.title,"?"))&&L.mutate(e));var e}},"Delete")),o.a.createElement(s.b,{className:"commonBtn",to:"/"},"Go back")),P&&o.a.createElement(m.a,{icon:u.b,className:"icon-spin preloader",size:"xl"})))});var A=function(){var e=Object(a.useState)("true"===localStorage.getItem("isLoggedIn")),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(localStorage.getItem("userName")),l=Object(i.a)(r,2),u=l[0],m=l[1],d=Object(a.useState)("admin"===localStorage.getItem("userName")),E=Object(i.a)(d,2),g=E[0],p=E[1];return o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(O,{userName:u,isLoggedIn:n,setIsLoggedIn:c,setIsAdmin:p,isAdmin:g}),o.a.createElement("main",null,o.a.createElement(f.d,null,o.a.createElement(f.b,{path:"/react-blog/login",element:o.a.createElement(P,{isLoggedIn:n},o.a.createElement(C,{setUserName:m,setIsLoggedIn:c,setIsAdmin:p}))}),o.a.createElement(f.b,{path:"/react-blog/blog/:postId",element:o.a.createElement(B,{isLoggedIn:n},o.a.createElement(L,{isAdmin:g}))}),o.a.createElement(f.b,{path:"/react-blog/blog",element:o.a.createElement(B,{isLoggedIn:n},o.a.createElement(k,{isAdmin:g}))}),o.a.createElement(f.b,{path:"/react-blog/404",element:o.a.createElement(F,null)}),o.a.createElement(f.b,{path:"/react-blog/",element:o.a.createElement(f.a,{to:"/react-blog/blog"})}),o.a.createElement(f.b,{path:"/react-blog/*",element:o.a.createElement(f.a,{to:"/react-blog/404"})}))),o.a.createElement(y,null))))},x=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,131)).then(function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)})};function D(){return Object(a.useEffect)(function(){console.log("rendered")}),o.a.createElement(l.QueryClientProvider,{client:H},o.a.createElement(A,{tab:"home"}))}var H=new l.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1}}}),Q=document.getElementById("root");r.a.createRoot(Q).render(o.a.createElement(D,null)),x()},40:function(e,t,n){},52:function(e,t,n){},62:function(e,t,n){},81:function(e,t,n){e.exports=n(126)},88:function(e,t,n){e.exports=n.p+"static/media/logo.06e73328.svg"},89:function(e,t,n){}},[[81,3,2]]]);
//# sourceMappingURL=main.076641a3.chunk.js.map